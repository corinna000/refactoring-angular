<div class="container">
  <div class="jumbotron">
    <h1><i>SlamOff</i></h1>

    <p>The Slam Poetry Bracket App</p>
  </div>
  <div>
    <!--<pre>{{ vm.selectedTracks }}</pre>-->
    <div class="panel panel-default">
      <div class="panel-body">
        <form class="form-inline" ng-submit="vm.searchForPoetry()">
          <div class="form-group">
            <label for="poetrySearch">Search for Slam Poetry</label>
            <input class="form-control" id="poetrySearch" name="poetrySearch" ng-model="vm.model.poetrySearch">
            <button class="btn btn-primary" type="submit">Search</button>
          </div>
        </form>
      </div>
    </div>
    <div id="search-results">
      <div ng-show="!vm.selectedTracks.length"></div>
      <div ng-show="vm.selectedTracks.length > 0 && vm.selectedTracks.length < 8">Select <span
        ng-bind="8 - vm.selectedTracks.length"></span> more tracks</span></div>
      <div ng-show="vm.selectedTracks.length == 8">
        <button class="btn btn-primary" ng-click="vm.startSlamOff()">Start SlamOff!</button>
      </div>
      <div ng-show="vm.selectedTracks.length > 8">You selected too many tracks!</span></div>
      <form name="checkedItems">
        <ul>
          <li ng-repeat="track in vm.searchResults track by $index">
            <label>
              <input type="checkbox" value="{{ $index }}" name="track_{{$index}}" ng-model="track.selected">
              {{ track.title }} ({{ track.duration | date:'mm:ss' }})
            </label>
          </li>
        </ul>
      </form>
    </div>
    <div ng-show="vm.tracks.length">
      <div>Position: {{ vm.position | date:'mm:ss' }}</div>
      <div>Duration : {{ vm.duration | date:'mm:ss' }}</div>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"
             ng-style="vm.percentPlayed">
          <span class="sr-only">{{ vm.percentPlayed }} Complete</span>
        </div>
      </div>
      <table class="table" id="brackets">
        <tr>
          <td class="round-one">
            <h3>Round 1</h3>
            <div ng-hide="vm.getWinner(0)">

              <div class="track">
                {{ vm.tracks[0].title }} ({{ vm.tracks[0].duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.tracks[0])"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(0, 0)" class="label label-success">vote!</button>
              </div>
              vs.
              <div class="track">
                {{ vm.tracks[1].title }} ({{vm.tracks[1].duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.tracks[1])"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(0, 1)" class="label label-success">vote!</button>
              </div>
            </div>
            <div ng-show="vm.getWinner(0)">
              Winner: <span class="winner">{{ vm.getWinner(0).title }}</span>
            </div>
          </td>
          <td rowdiv="2" class="round-two">

            <h3>Semi-Final</h3>
            <div ng-show="vm.previousRoundsComplete(0) && !vm.getWinner(4)">

              <div class="track">
                {{ vm.getWinner(0).title }} ({{ vm.getWinner(0).duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.getWinner(0))"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(4, vm.winners[0])" class="label label-success">vote!</button>
              </div>
              vs.
              <div class="track">
                {{ vm.getWinner(1).title }} ({{vm.getWinner(1).duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.roundOne[1])"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(4, vm.winners[1])" class="label label-success">vote!</button>
              </div>
            </div>
            <div ng-show="vm.getWinner(4)">
              Winner: <span class="winner">{{ vm.getWinner(4).title }}</span>
            </div>

          </td>
          <td rowdiv="4" class="round-three">

            <h3>Final Round</h3>
            <div ng-show="vm.getWinner(4) && vm.getWinner(5) && !vm.getWinner(6)">

              <div class="track">
                {{ vm.getWinner(4).title }} ({{ vm.getWinner(4).duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.getWinner(4))"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(6, vm.winners[4])" class="label label-success">vote!</button>
              </div>
              vs.
              <div class="track">
                {{ vm.getWinner(5).title }} ({{vm.getWinner(5).duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.getWinner(5))"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(6, vm.winners[5])" class="label label-success">vote!</button>
              </div>
            </div>
            <div ng-show="vm.getWinner(6)">
              Winner: <span class="winner">{{ vm.getWinner(6).title }}</span>
            </div>
          </td>
        </tr>
        <tr>
          <td class="round-one">
            <div ng-hide="vm.getWinner(1)">
              <div class="track">
                {{ vm.tracks[2].title }} ({{ vm.tracks[2].duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.tracks[2])"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(1, 2)" class="label label-success">vote!</button>
              </div>
              vs.
              <div class="track">
                {{ vm.tracks[3].title }} ({{vm.tracks[3].duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.tracks[3])"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(1, 3)" class="label label-success">vote!</button>
              </div>
            </div>
            <div ng-show="vm.getWinner(1)">
              Winner: <span class="winner">{{ vm.getWinner(1).title }}</span>
            </div>
        </tr>
        <tr>
          <td class="round-one">
            <div ng-hide="vm.getWinner(2)">
              <div class="track">
                {{ vm.tracks[4].title }} ({{ vm.tracks[4].duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.tracks[4])"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(2, 4)" class="label label-success">vote!</button>
              </div>
              vs.
              <div class="track">
                {{ vm.tracks[5].title }} ({{vm.tracks[5].duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.tracks[5])"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(2, 5)" class="label label-success">vote!</button>
              </div>
            </div>
            <div ng-show="vm.getWinner(2)">
              Winner: <span class="winner">{{ vm.getWinner(2).title }}</span>
            </div>
          </td>
          <td rowdiv="2" class="round-two">
            <div ng-show="vm.previousRoundsComplete(1) && !vm.getWinner(5)">
              <h3>Semi-Final</h3>
              <div class="track">
                {{ vm.getWinner(2).title }} ({{ vm.getWinner(2).duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.roundOne[2])"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(5, vm.winners[2])" class="label label-success">vote!</button>
              </div>
              vs.
              <div class="track">
                {{ vm.getWinner(3).title }} ({{vm.getWinner(3).duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.getWinner(3))"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(5, vm.winners[3])" class="label label-success">vote!</button>
              </div>
            </div>
            <div ng-show="vm.getWinner(5)">
              Winner: <span class="winner">{{ vm.getWinner(5).title }}</span>
            </div>

          </td>
        </tr>
        <tr>
          <td class="round-one">
            <div ng-hide="vm.getWinner(3)">
              <div class="track">
                {{ vm.tracks[6].title }} ({{ vm.tracks[6].duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.tracks[6])"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(3, 6)" class="label label-success">vote!</button>
              </div>
              vs.
              <div class="track">
                {{ vm.tracks[7].title }} ({{vm.tracks[7].duration | date:'mm:ss'}})
                <span ng-click="vm.playTrack(vm.tracks[7])"><i class="glyphicon glyphicon-play"></i></span>
                <span ng-click="vm.currentlyPlayingTrack.stop()"><i class="glyphicon glyphicon-stop"></i></span>
                <button ng-click="vm.vote(3, 7)" class="label label-success">vote!</button>
              </div>
            </div>
            <div ng-show="vm.getWinner(3)">
              Winner: <span class="winner">{{ vm.getWinner(3).title }}</span>
            </div>
          </td>
        </tr>
      </table>

      <div ng-show="vm.getWinner(6)">
        <h3>Voting Summary:</h3>
        <table class="table table-striped">
          <tr ng-repeat="track in vm.tracks | orderBy: '-votes'">
            <td>{{ track.title }}</td>
            <td><span ng-show="track.votes">{{ track.votes }}</span><span ng-hide="track.votes">0</span></td>
          </tr>

        </table>
      </div>
    </div>
  </div>


</div>
